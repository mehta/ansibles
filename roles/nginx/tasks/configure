# nginx/tasks/configure

## For DEBIAN nodes
- name: configure | DEBIAN | make sure mime.types are upto-date
  copy:
    src: mime.types
    dest: "{{nginx_dir}}/mime.types"
    owner: "{{nginx_user}}"
    group: "{{nginx_user}}"
    mode: 0644
  when: ansible_os_family == 'Debian'

- name: configure | DEBIAN | make sure Nginx configuration is upto-date
  template:
    src: nginx.conf.j2
    dest: "{{nginx_dir}}/nginx.conf"
    owner: "{{nginx_user}}"
    group: "{{nginx_user}}"
    mode: 0644
  notify:
    - restart nginx
  when: ansible_os_family == 'Debian'