# file: nginx/tasks/modules/http_echo_module.yml
# configure flag: --add-module=/tmp/nginx_echo


## For DEBIAN nodes
- name: http_echo_module | DEBIAN | download http_echo_module source
  get_url:
    url: "{{nginx_echo_url}}"
    dest: "/tmp/nginx-echo-module.tar.gz"
  when: ansible_os_family == 'Debian'

- name: http_echo_module | DEBIAN | unpack http_echo_module source
  command: tar -xvzf /tmp/nginx-echo-module.tar.gz chdir=/tmp creates=/tmp/echo-nginx-module-{{nginx_echo_version}}
  when: ansible_os_family == 'Debian'

- name: http_echo_module | DEBIAN | copy http_echo_module source
  command: sudo cp -R /tmp/echo-nginx-module-{{nginx_echo_version}} /tmp/nginx_echo
  when: ansible_os_family == 'Debian'
